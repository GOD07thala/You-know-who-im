<script>
document.addEventListener('DOMContentLoaded', function () {
ย let lastPeriod = '';
ย const historyDiv = document.getElementById('history');

ย function generatePrediction() {
ย ย const now = new Date();
ย ย const totalMinutes = now.getHours() * 60 + now.getMinutes() + 1;
ย ย const formattedMinutes = String(totalMinutes).padStart(4, '0');
ย ย const currentDate = now.toISOString().split('T')[0].replace(/-/g, '');
ย ย const autoPeriod = currentDate + '01' + formattedMinutes;

ย ย if (autoPeriod === lastPeriod) return;

ย ย lastPeriod = autoPeriod;

ย ย // Random Prediction
ย ย const prediction = Math.random() < 0.5 ? 'SMALL' : 'BIG';

ย ย // Simulate 91Club Actual Result (Replace with real API)
ย ย const actualResult = Math.random() < 0.5 ? 'SMALL' : 'BIG';

ย ย const winLoss = prediction === actualResult ? 'WIN' : 'LOSS';
ย ย const resultColor = winLoss === 'WIN' ? 'limegreen' : 'red';

ย ย // Update main display
ย ย document.getElementById('auto-period').textContent = `API: ${autoPeriod}`;
ย ย document.getElementById('result').textContent = `RESULT: ${prediction} (${winLoss})`;

ย ย // Add to history
ย ย const entry = document.createElement('div');
ย ย entry.className = 'history-entry';
ย ย entry.innerHTML = `
ย ย ย <span><strong>Period:</strong> ${autoPeriod}</span>
ย ย ย <span><strong>Prediction:</strong> ${prediction}</span>
ย ย ย <span><strong>Actual:</strong> ${actualResult}</span>
ย ย ย <span style="color:${resultColor};"><strong>${winLoss}</strong></span>
ย ย `;
ย ย historyDiv.prepend(entry);
ย }

ย // ๐ Auto Predict Every 60 Seconds
ย generatePrediction(); // First run
ย setInterval(generatePrediction, 60000); // Every 60 sec

ย // ๐งน Clear History Button
ย const clearBtn = document.createElement('button');
ย clearBtn.textContent = 'CLEAR HISTORY';
ย clearBtn.className = 'telegram-button';
ย clearBtn.onclick = () => {
ย ย historyDiv.innerHTML = '<h4>๐ Prediction History</h4>';
ย };

ย document.querySelector('.buttons').appendChild(clearBtn);
});
</script>
